------------------------------------------------------------------------------
                               YANDEX.METRICS
------------------------------------------------------------------------------


Сервис Яндекс.Метрика [1] это Европейская альтернатива Google Analytics.

В свою очередь проект Yandex.Metrics помогает интегрировать сайт с Яндекс.Метрикой [1].

Проект состоит из двух модулей: Yandex.Metrics Счетчик и Yandex.Metrics Отчеты.

* Модуль Yandex.Metrics Счетчик
    Возможности:
        * Установка кода счетчика Яндекс.Метрики на сайт
        * Настройка видимости счетчика
    Зависимости
        * НЕТ ЗАВИСИМОСТЕЙ! Просто включите и используйте.

* Модуль Yandex.Metrics Отчеты
    Замечание:
        Для взаимодействия с сервисом Яндекс.Метрика используется API Яндекс.Метрики [2].
    Возможности:
        * Отчеты и графики:
            * Просмотры страниц, посетители, новые посетители
            * Источники переходов
            * Популярные поисковые фразы
            * Популярное содержимое
            * География посещений
            * Отчет по времени суток
            * Половозрастная структура
        * Блок со ссылками на популярное содержимое (Используется модуль Views)
    Зависимости
        * Модуль Yandex.Metrics Счетчик
        * Google chart API [3]
        * Yandex Services Authorization API [13]
        * Views [4]
        * [Необязательно] Для поддержки интернационализированных доменных имен
          скачайте класс idna_convert, разработанный Matthias Sommerfeld, отсюда [10] и скопируйте его
          в 'sites/all/libraries/idna_convert/' или 'sites/name_of_your_site/libraries/idna_convert/'
          директорию установленного Drupal.

Переводы интерфейса (.po):
Русский
Украинский


УСТАНОВКА
------------------------------------------------------------------------------
1. Создайте резервную копию вашей базы данных.

2. Убедитесь, что зависимости модуля разрешены.
   Пожалуйста, сначала установите модуль Google chart API [3], Views [4] и Yandex Services Authorization API [13].

3. Если вы используете интернационализированное доменное имя, вам следует скачать PHP файл
   idna_convert.class.php, созданный Matthias Sommerfeld, со страницы [10] и скопировать его
   в 'sites/all/libraries/idna_convert/' директорию вашей Drupal установки.

4. Скопируйте директорию 'yandex_metrics/' целиком в директорию 'sites/all/modules/'
   вашей Drupal установки.
   Больше информации об установке модулей вы можете найти в
   "Installing contributed modules (Drupal 7)" [14]

5. Включите модуль "Yandex.Metrics" на странице управления модулями
   (Управление >> Модули).

6. Настройте модуль (смотрите раздел "НАСТРОЙКА" ниже).


ОБНОВЛЕНИЕ
------------------------------------------------------------------------------
1. Убедитесь в том, что версия, до которой вы хотите обновиться, содержит все
   возможности, которые вы используете в вашей Drupal установке.
   Некоторые возможности могли быть удалены или заменены другими.

2. Внимательно изучите очередь задач проекта [8] на наличие возможных проблем при
   обновлении до начала процесса обновления.

3. Создайте резервную копию вашей базы данных.

4. Включите режим обслуживания на сайте.

5. Обновите текущий код модуля на последнюю рекомендуемую версию. Предыдущая
   версия могла иметь ошибки уже известные и исправленные в последней версии.

6. Вызовите скрипт update.php и завершите операцию обновления.
   Для получения дополнительной информации, пожалуйста, следуйте по ссылке
   http://groups.drupal.org/node/19513.

7. Проверьте настройки вашего модуля и то, что модуль работает корректно.
   Также убедитесь, что все требуемые модули включены и разрешения ролей назначены.

8. Выключите режим обслуживания.

Замечание: если вы имеете такую возможность, постарайтесь обновить модуль сначала
           на локальной или тестовой копии вашего сайта.


НАСТРОЙКА
------------------------------------------------------------------------------
* Модуль Yandex.Metrics Счетчик
    1. На странице управления разрешениями ролей ("Управление >> Люди >> Разрешения") вам нужно назначить:

        *	"Управлять Yandex.Metrics настройками" разрешение ролям, которым вы хотите позволить
	    управлять настройками модуля Yandex.Metrics Счетчик.

    2. Создайте учетную запись на Яндекс.Метрике [1].

       Пропустите этот шаг, если вы уже ее имеете.

    3. Создайте счетчик Яндекс.Метрики для вашего сайта в личном кабинете Яндекс.Метрики.
       Там же создайте Javascript код счетчика.
       Замечание: Мы рекомендуем создать простой счетчик без информера,
              но счетчик с информером так же допускается.

       Сохраните сформированный Javascript код для того, чтобы использовать его далее.

       Пропустите этот шаг, если вы уже создали счетчик для вашего сайта.

    4. Перейдите на страницу настройки модуля ("Управление >> Настройка >> Система >> Yandex.Metrics")
       Для доступа к этой странице пользователи нуждаются в разрешении "Управлять Yandex.Metrics настройками".

       Вставьте Javascript код счетчика из Яндекс.Метрики в текстовое поле Код счетчика на странице
       настройки модуля.
       Вы также можете произвести настройку отображения кода счетчика.
       Затем отправьте форму.
       Этим шагом вы добавите код счетчика в подвал разрешенных страниц вашего сайта.

       Пропустите этот шаг, если вы уже добавили код счетчика Яндекс.Метрики на страницы вашего сайта
       любым другим способом.

       Пропустите следующие шаги, если вас не интересует ничего, кроме установки счетчика.


* Модуль Yandex.Metrics Отчеты
    1. На странице управления разрешениями ролей ("Управление >> Люди >> Разрешения") вам нужно назначить:

       *   "Доступ к Yandex.Metrics отчету" разрешение ролям, которым вы хотите разрешить
            просматривать Сводный отчет Yandex.Metrics

    2. Зарегистрируйте Яндекс приложение и авторизуйте ваш сайт, следуя документации модуля
       Yandex Services Authorization API [13].
       Убедитесь в том, что вы выставили разрешение
       "Яндекс.Метрика" -> "Получение статистики, чтение параметров своих и доверенных счётчиков"
       в настройках приложения на Яндексе.

    3. Настройка отчетов
       Перейдите на вкладку Отчеты ("Управление >> Настройка >> Система >> Yandex.Metrics >> Отчеты"),
       чтобы включить или отключить некоторые отчеты.

    4. Проверьте содержимое Сводного отчета Yandex.Metrics
       ("Управление >> Отчеты >> Сводный отчет Yandex.Metrics").
       Для доступа к этой странице пользователи нуждаются в разрешении "Доступ к Yandex.Metrics отчету".
       Замечание:
         Ваш отчет может быть пуст, если вы только что создали счетчик Яндекс.Метрики и разместили
         его на ваш сайт. Вероятно статистическая информация еще не была собрана.
         Пожалуйста, попробуйте позже.

    5. После установки и настройки модуля вам будет доступен блок "Популярное содержимое (Yandex.Metrics)".
       Этот блок показывает список ссылок популярного контента предоставляемого Яндексом.

       Вы можете включить блок на странице настройки блоков ("Управление >> Структура >> Блоки")

       Для настройки параметров блока вы можете изменить представление "Популярное содержимое" ("Управление >> Структура >> Представления")

    6. Модуль использует Cron [7] для получения информации представления "Популярное содержимое" из Яндекс.Метрики.
       Перейдите на страницу настройки Cron ("Управление >> Настройка >> Система >> Yandex.Metrics >> Cron"),
       чтобы изменить настройки по-умолчанию.


РАЗРАБОТЧИКАМ
------------------------------------------------------------------------------
Читайте о том, как писать собственные расширения для модуля Yandex.Metrics Отчеты в файле yandex_metrics_reports/API.txt.


ОШИБКИ И НЕДОСТАТКИ
------------------------------------------------------------------------------
* Смотрите полный список задач [8].


АВТОРЫ И РАЗРАБОТЧИКИ
------------------------------------------------------------------------------
Постоянные разработчики:  Константин Комелин [9], Екатерина Маршалкина [10]
Идея: Константин Комелин [9], Александр Сорокин [11]
Коммитеры: [12]
Благодарим всех замечательных ребят, которые помогали в разработке проекта!


ССЫЛКИ
------------------------------------------------------------------------------
[1] http://metrika.yandex.ru/
[2] http://api.yandex.ru/metrika/
[3] http://drupal.org/project/chart
[4] http://drupal.org/project/views
[5] http://www.phpclasses.org/browse/file/5845.html
[6] http://api.yandex.ru/oauth/doc/dg/tasks/register-client.xml
[7] http://drupal.org/cron
[8] http://drupal.org/project/issues/yandex_metrics
[9] http://drupal.org/user/1195752
[10] http://drupal.org/user/1399638
[11] http://drupal.org/user/108088
[12] http://drupal.org/node/1180284/committers
[13] https://drupal.org/project/yandex_services_auth
[14] https://drupal.org/documentation/install/modules-themes/modules-7
